---
import List from '../../../components/list.astro'
import { getChannelInfo } from '../../../lib/telegram'

const { channel: channelName, id } = Astro.params

// Update SITE_URL for local context
Astro.locals.SITE_URL = `${Astro.url.origin}/${channelName}/`

const channel = await getChannelInfo(Astro, { channelName, id })

if (!channel || !channel.posts || channel.posts.length === 0) {
  return Astro.redirect('/')
}
---

<List channel={channel} isItem={true} />
